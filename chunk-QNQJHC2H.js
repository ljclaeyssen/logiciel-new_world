import{$b as g,K as d,Q as j,aa as w,ac as y,ia as b,ja as I}from"./chunk-RMK55XS2.js";import{a as o,b as u}from"./chunk-7CGTOI24.js";function v(n){let t=g(()=>n());return W(t)?new Proxy(n,{get(e,r){return r in t?(b(e[r])||Object.defineProperty(e,r,{value:y(()=>e()[r]),configurable:!0}),v(e[r])):e[r]}}):n}var R=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function W(n){if(n===null||typeof n!="object"||O(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(R.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function O(n){return typeof n?.[Symbol.iterator]=="function"}var K=new WeakMap,i=Symbol("STATE_SOURCE");function B(n,...t){n[i].update(e=>t.reduce((r,s)=>o(o({},r),typeof s=="function"?s(r):s),e)),P(n)}function A(n){return n[i]()}function C(n){return K.get(n[i])||[]}function P(n){let t=C(n);for(let e of t){let r=g(()=>A(n));e(r)}}function G(...n){let t=[...n],e=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class c{constructor(){let a=r.reduce((l,T)=>T(l),H()),{stateSignals:p,props:M,methods:k,hooks:x}=a,h=o(o(o({},p),M),k);this[i]=a[i];for(let l of Reflect.ownKeys(h))this[l]=h[l];let{onInit:m,onDestroy:S}=x;m&&m(),S&&j(w).onDestroy(S)}static \u0275fac=function(p){return new(p||c)};static \u0275prov=d({token:c,factory:c.\u0275fac,providedIn:e.providedIn||null})}return c})()}function H(){return{[i]:I({}),stateSignals:{},props:{},methods:{},hooks:{}}}function U(n){return t=>{let e=n(o(o(o({[i]:t[i]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),u(o({},t),{props:o(o({},t.props),e)})}}function Q(n){return U(n)}function X(n){return t=>{let e=o(o(o({[i]:t[i]},t.stateSignals),t.props),t.methods),r=typeof n=="function"?n(e):n,s=c=>{let f=r[c],a=t.hooks[c];return f?()=>{a&&a(),f(e)}:a};return u(o({},t),{hooks:{onInit:s("onInit"),onDestroy:s("onDestroy")}})}}function Z(n){return t=>{let e=n(o(o(o({[i]:t[i]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),u(o({},t),{methods:o(o({},t.methods),e)})}}function $(n){return t=>{let e=typeof n=="function"?n():n,r=Reflect.ownKeys(e);t[i].update(c=>o(o({},c),e));let s=r.reduce((c,f)=>{let a=y(()=>t[i]()[f]);return u(o({},c),{[f]:v(a)})},{});return u(o({},t),{stateSignals:o(o({},t.stateSignals),s)})}}var D=class n{constructor(){}load(t){let e=localStorage.getItem(t);return e?JSON.parse(e):null}save(t,e){localStorage.setItem(t,JSON.stringify(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{B as a,G as b,Q as c,X as d,Z as e,$ as f,D as g};
