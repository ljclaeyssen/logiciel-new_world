import{a as N,b as E,c as $,d as R,e as W,f as F,g as V,h as I,i as B,j as Y,k as L,l as z,m as Z}from"./chunk-BYVVWDWO.js";import"./chunk-PQHGSJJA.js";import"./chunk-C4UXAAAM.js";import"./chunk-M4JAQYG4.js";import{a as O}from"./chunk-P6YZ5EHV.js";import"./chunk-QNQJHC2H.js";import{j as H}from"./chunk-FMHSL3JQ.js";import{Ea as J,Gb as m,Hb as w,Ia as r,Ib as h,Jb as K,Mb as Q,Ob as X,Pb as u,Q as k,Rb as _,Ta as b,W as g,X as T,Za as x,ac as y,eb as s,jb as C,kb as D,lb as A,mb as f,nb as v,ob as c,pb as a,qb as M,ub as P,wb as S,xb as l}from"./chunk-RMK55XS2.js";import"./chunk-7CGTOI24.js";var ne=(t,i)=>i.id;function oe(t,i){if(t&1&&(c(0,"span",7),m(1),u(2,"timeRemaining"),a()),t&2){let e=l().$index,n=l().$implicit,o=l(2);r(),h(" ",_(2,1,o.completions()[n.id+"-"+e],n.refresh)," ")}}function re(t,i){if(t&1){let e=P();c(0,"div",5)(1,"p-button",6),u(2,"hasReset"),S("click",function(){let o=g(e).$index,p=l().$implicit,d=l(2);return T(d.completeItem(p.id+"-"+o))}),a(),x(3,oe,3,4,"span",7),u(4,"hasReset"),a()}if(t&2){let e=i.$implicit,n=i.$index,o=l().$implicit,p=l(2);r(),s("label",e.name+(e.amount>1?" ("+e.amount+")":""))("disabled",!_(2,3,p.completions()[o.id+"-"+n],o.refresh)),r(2),C(_(4,6,p.completions()[o.id+"-"+n],o.refresh)?-1:3)}}function ae(t,i){if(t&1&&(c(0,"p-accordion-panel",1)(1,"p-accordion-header")(2,"div",2)(3,"div"),m(4),a()()(),c(5,"p-accordion-content")(6,"div",3)(7,"div",4),f(8,re,5,9,"div",5,D),a()()()()),t&2){let e=i.$implicit;s("value",e.id),r(4),w(e.name),r(4),v(e.items)}}function ce(t,i){if(t&1&&(c(0,"p-accordion",0),f(1,ae,10,2,"p-accordion-panel",1,ne),a()),t&2){let e=l();s("value",e.openPanels())("multiple",!0),r(),v(e.eventTasks())}}function le(t,i){t&1&&(c(0,"h4"),m(1," Aucune activit\xE9 hebdomadaire d'\xE9v\xE8nement pour le moment. (Si c'est un oubli de ma part merci de me le signaler) "),a())}var U=class t{weekliesStore=k(O);openPanelsService=k(Y);Rarity=L;completions=this.weekliesStore.completedTasks;eventTasks=y(()=>{let i=N.now();return this.weekliesStore.eventTasks().filter(n=>{let o=N.fromISO(n.eventStartDate),p=N.fromISO(n.eventEndDate);return i>=o&&i<p})});itemsPerTask=y(()=>this.eventTasks().map(i=>i.items.length));openPanels=this.openPanelsService.calculateOpenPanelsComputed(this.eventTasks,this.completions,this.itemsPerTask);completeItem(i){this.weekliesStore.completeWeekly(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-weekly-event-task"]],decls:4,vars:1,consts:[[3,"value","multiple"],[3,"value"],[1,"accordion-header"],[1,"p-4"],[1,"occurrences-container"],[1,"occurrence-item"],["icon","pi pi-check","iconPos","right","size","small",3,"click","label","disabled"],[1,"remaining-time"]],template:function(e,n){e&1&&(c(0,"h2"),m(1,"\xC9v\xE9nements Temporaires"),a(),x(2,ce,3,2,"p-accordion",0)(3,le,2,0,"h4")),e&2&&(r(2),C(n.eventTasks().length?2:3))},dependencies:[W,R,$,E,F,I,B],encapsulation:2})};var pe=(t,i,e,n)=>({"rarity-green":t,"rarity-blue":i,"rarity-purple":e,"rarity-orange":n}),se=(t,i)=>i.id;function me(t,i){if(t&1&&(c(0,"p"),m(1),a()),t&2){let e=l().$implicit;r(),h(" ",e.description," ")}}function de(t,i){if(t&1&&(c(0,"span",9),m(1),u(2,"timeRemaining"),a()),t&2){let e=l().$index,n=l().$implicit,o=l();r(),h(" ",_(2,1,o.completions()[n.id+"-"+e],n.refresh)," ")}}function ue(t,i){if(t&1){let e=P();c(0,"div",5)(1,"p-button",8),u(2,"hasReset"),S("click",function(){let o=g(e).$index,p=l().$implicit,d=l();return T(d.completeItem(p.id+"-"+o))}),a(),x(3,de,3,4,"span",9),u(4,"hasReset"),a()}if(t&2){let e=i.$implicit,n=i.$index,o=l().$implicit,p=l();r(),s("label",e.name)("ngClass",X(10,pe,e.rarity===p.Rarity.GREEN,e.rarity===p.Rarity.BLUE,e.rarity===p.Rarity.PURPLE,e.rarity===p.Rarity.ORANGE))("disabled",!_(2,4,p.completions()[o.id+"-"+n],o.refresh)),r(2),C(_(4,7,p.completions()[o.id+"-"+n],o.refresh)?-1:3)}}function _e(t,i){if(t&1&&M(0,"p-image",7),t&2){let e=i.$implicit;s("src",e)("preview",!0)}}function fe(t,i){if(t&1&&(c(0,"p-accordion-panel",1)(1,"p-accordion-header")(2,"div",2)(3,"div"),m(4),a()()(),c(5,"p-accordion-content")(6,"div"),x(7,me,2,1,"p"),c(8,"div",3)(9,"div",4),f(10,ue,5,15,"div",5,D),a(),c(12,"div",6),f(13,_e,1,2,"p-image",7,A),a()()()()()),t&2){let e=i.$implicit;s("value",e.id),r(4),w(e.name),r(3),C((e.description||"").length?7:-1),r(3),v(e.items),r(3),v(e.illustrationsURI)}}var j=class t{weeklyStore=k(O);resetTimeService=k(V);Rarity=L;completions=this.weeklyStore.completedTasks;purchasableTasks=y(()=>this.weeklyStore.purchasableTasks());openPanels=y(()=>{let i=this.purchasableTasks(),e=this.completions();return i.filter(n=>{for(let o=0;o<n.items.length;o++){let p=`${n.id}-${o}`,d=e[p];if(!d||!this.resetTimeService.isBeforeReset(d,n.refresh))return!0}return!1}).map(n=>n.id)});completeItem(i){this.weeklyStore.completeWeekly(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-weekly-purchasables"]],decls:5,vars:2,consts:[[3,"value","multiple"],[3,"value"],[1,"accordion-header"],[1,"content"],[1,"occurrences-container"],[1,"occurrence-item"],[1,"illustations-container"],["height","200",1,"new-world-border","epic",3,"src","preview"],["icon","pi pi-check","iconPos","right","size","small",3,"click","label","ngClass","disabled"],[1,"remaining-time"]],template:function(e,n){e&1&&(c(0,"h2"),m(1,"Achats Hebdomadaires"),a(),c(2,"p-accordion",0),f(3,fe,15,3,"p-accordion-panel",1,se),a()),e&2&&(r(2),s("value",n.openPanels())("multiple",!0),r(),v(n.purchasableTasks()))},dependencies:[W,R,$,E,F,I,z,B,H],styles:[".occurrences-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.occurrence-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.completed[_ngcontent-%COMP%]{color:#34d399}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:40% 60%}.illustations-container[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}"]})};var ve=t=>({completed:t}),ye=(t,i)=>i.id;function ke(t,i){if(t&1&&M(0,"p",4),t&2){let e=l().$implicit;s("innerHTML",e.description,J)}}function xe(t,i){if(t&1&&(c(0,"span",11),m(1),u(2,"timeRemaining"),a()),t&2){let e=l().$index,n=l().$implicit,o=l();r(),h(" ",_(2,1,o.completions()[n.id+"-"+(e+1)],n.refresh)," ")}}function Ce(t,i){if(t&1){let e=P();c(0,"div",7)(1,"p-button",10),u(2,"customOccurrenceLabel"),u(3,"hasReset"),S("click",function(){let o=g(e).$index,p=l().$implicit,d=l();return T(d.completeTask(p.id+"-"+(o+1)))}),a(),x(4,xe,3,4,"span",11),u(5,"hasReset"),a()}if(t&2){let e=i.$index,n=l().$implicit,o=l();r(),s("label",_(2,3,n.name,e+1))("disabled",!_(3,6,o.completions()[n.id+"-"+(e+1)],n.refresh)),r(3),C(_(5,9,o.completions()[n.id+"-"+(e+1)],n.refresh)?-1:4)}}function he(t,i){if(t&1&&M(0,"p-image",9),t&2){let e=i.$implicit;s("src",e)("preview",!0)}}function ge(t,i){if(t&1&&(c(0,"p-accordion-panel",1)(1,"p-accordion-header")(2,"div",2)(3,"div"),m(4),a(),c(5,"div",3),m(6),a()()(),c(7,"p-accordion-content")(8,"div"),x(9,ke,1,1,"p",4),c(10,"div",5)(11,"div",6),f(12,Ce,6,12,"div",7,A),a(),c(14,"div",8),f(15,he,1,2,"p-image",9,A),a()()()()()),t&2){let e=i.$implicit,n=l();s("value",e.id),r(4),w(e.name),r(),s("ngClass",Q(6,ve,n.countCompletedOccurrences(e.id,e.amount)===e.amount)),r(),K(" ",n.countCompletedOccurrences(e.id,e.amount),"/",e.amount," "),r(3),C((e.description||"").length?9:-1),r(3),v(n.Array(e.amount).keys()),r(3),v(e.illustrationsURI)}}var G=class t{weeklyStore=k(O);resetTimeService=k(V);completions=this.weeklyStore.completedTasks;pveTasks=y(()=>this.weeklyStore.pveTasks());pveItemsPerTask=y(()=>this.pveTasks().map(i=>i.amount));openPanels=y(()=>{let i=this.pveTasks(),e=this.completions();return i.filter(n=>{for(let o=1;o<=n.amount;o++){let p=`${n.id}-${o}`,d=e[p];if(!d||!this.resetTimeService.isBeforeReset(d,n.refresh))return!0}return!1}).map(n=>n.id)});countCompletedOccurrences(i,e){let n=this.completions(),o=0;for(let p=1;p<=e;p++){let d=`${i}-${p}`,q=n[d];q&&this.resetTimeService.isBeforeReset(q,this.pveTasks().find(ie=>ie.id===i).refresh)&&o++}return o}completeTask(i){this.weeklyStore.completeWeekly(i)}Array=Array;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-weekly-pve"]],decls:5,vars:2,consts:[[3,"value","multiple"],[3,"value"],[1,"accordion-header"],[3,"ngClass"],[3,"innerHTML"],[1,"content"],[1,"occurrences-container"],[1,"occurrence-item"],[1,"illustations-container"],["height","200",1,"new-world-border","epic",3,"src","preview"],["icon","pi pi-check","iconPos","right","size","small",3,"click","label","disabled"],[1,"remaining-time"]],template:function(e,n){e&1&&(c(0,"h2"),m(1,"PVE Hebdomadaire"),a(),c(2,"p-accordion",0),f(3,ge,17,8,"p-accordion-panel",1,ye),a()),e&2&&(r(2),s("value",n.openPanels())("multiple",!0),r(),v(n.pveTasks()))},dependencies:[W,R,$,E,F,Z,I,z,B,H],styles:[".occurrences-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.occurrence-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.completed[_ngcontent-%COMP%]{color:#34d399}[_nghost-%COMP%]   .accordion-header[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:190px 1fr;align-items:center;gap:1rem}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:40% 60%}.illustations-container[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}"]})};var lt=[{path:"",loadComponent:()=>import("./chunk-ZFKLPSIL.js").then(t=>t.WeeklyContentComponent),children:[{path:"activities",component:G},{path:"purchasables",component:j},{path:"event",component:U},{path:"**",redirectTo:"activities"}]},{path:"**",redirectTo:"ecr"}];export{lt as weeklyContentRoutes};
